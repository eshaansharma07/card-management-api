<!DOCTYPE html>
<html>
<head>
    <title>Card Dashboard</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>

<div class="app">

    <div class="header">
        <h1>Card Management Dashboard</h1>
    </div>

    <div class="form-section">
        <input type="text" id="title" placeholder="Card Title">
        <input type="text" id="description" placeholder="Description">
        <button onclick="addCard()">Add Card</button>
    </div>

    <div id="cardContainer" class="cards"></div>

</div>

<script>

async function addCard(){

    await fetch("/addCard",{
        method:"POST",
        headers:{"Content-Type":"application/json"},
        body:JSON.stringify({
            title:title.value,
            description:description.value
        })
    });

    loadCards();
}

async function deleteCard(id){

    await fetch("/card/"+id,{
        method:"DELETE"
    });

    loadCards();
}

async function loadCards(){

    let res = await fetch("/cards");
    let data = await res.json();

    cardContainer.innerHTML="";

    data.forEach(card=>{

        cardContainer.innerHTML+=`
        <div class="card">
            <h3>${card.title}</h3>
            <p>${card.description}</p>
            <button class="delete" onclick="deleteCard('${card._id}')">Delete</button>
        </div>
        `;
    });
}

loadCards();

</script>

</body>
</html>
