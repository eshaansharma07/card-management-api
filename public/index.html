<!DOCTYPE html>
<html>
<head>
    <title>Card Dashboard</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>

<div class="dashboard">

    <div class="navbar">
        <h2>ðŸ’³ Card Dashboard</h2>
    </div>

    <div class="add-section">
        <input id="title" placeholder="Enter Card Title">
        <input id="description" placeholder="Enter Description">
        <button onclick="addCard()">Add Card</button>
    </div>

    <div id="cardContainer" class="grid"></div>

</div>

<script>

async function addCard(){

    let title = document.getElementById("title").value;
    let description = document.getElementById("description").value;

    await fetch("/cards",{
        method:"POST",
        headers:{"Content-Type":"application/json"},
        body:JSON.stringify({title,description})
    });

    loadCards();
}

async function deleteCard(id){

    await fetch("/cards/"+id,{
        method:"DELETE"
    });

    loadCards();
}

async function loadCards(){

    let res = await fetch("/cards");
    let data = await res.json();

    let container = document.getElementById("cardContainer");

    container.innerHTML="";

    data.forEach(card=>{

        container.innerHTML+=`
        <div class="card">
            <div class="card-header">
                <h3>${card.title}</h3>
            </div>
            <p>${card.description}</p>
            <button class="delete" onclick="deleteCard('${card._id}')">Delete</button>
        </div>
        `;
    });
}

loadCards();

</script>

</body>
</html>
