<!DOCTYPE html>
<html>
<head>
    <title>Card Dashboard</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>

<div class="app">

    <h1>Card Management Dashboard</h1>

    <div class="form">
        <input id="title" placeholder="Card Title">
        <input id="description" placeholder="Description">
        <button onclick="addCard()">Add Card</button>
    </div>

    <div id="cardContainer" class="cards"></div>

</div>

<script>

async function addCard(){

    let title = document.getElementById("title").value;
    let description = document.getElementById("description").value;

    await fetch("/cards",{
        method:"POST",
        headers:{"Content-Type":"application/json"},
        body:JSON.stringify({title,description})
    });

    loadCards();
}

async function deleteCard(id){

    await fetch("/cards/"+id,{
        method:"DELETE"
    });

    loadCards();
}

async function loadCards(){

    let res = await fetch("/cards");
    let data = await res.json();

    let container = document.getElementById("cardContainer");
    container.innerHTML="";

    data.forEach(card=>{

        container.innerHTML+=`
        <div class="card">
            <h3>${card.title}</h3>
            <p>${card.description}</p>
            <button class="delete" onclick="deleteCard('${card._id}')">Delete</button>
        </div>
        `;
    });
}

loadCards();

</script>

</body>
</html>
